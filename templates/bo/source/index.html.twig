{% extends 'base.html.twig' %}

{% block title %}Source index{% endblock %}

{% block body %}
    <h1>Source index</h1>
    <a href="{{ path('app_source_new') }}">Create new</a>
    <br/><br/><br/>

    <table class="table">
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>editer</th>
                <th>addPart</th>
                <th>partNum</th>
                <th>partName</th>
                <th>editPart</th>
            </tr>
        </thead>
        <tbody>
        {% for source in sources %}
            <tr>
                <td>{{ source.id }}</td>
                <td>{{ source.name }}</td>
                <td>
                    <a href="{{ path('app_source_edit', {'id': source.id}) }}">edit</a>
                </td>
                <td>
                    <a href="{{ path('app_source_part_new', {'id': source.id}) }}">Create part</a>
                </td>
                <td><ul>{% for p in source.parts|sort((a, b) => a.number <=> b.number) %}<li>{{ p.number }}</li>{% endfor %}</ul></td>
                <td><ul>{% for p in source.parts|sort((a, b) => a.number <=> b.number) %}<li>{{ p.name }}</li>{% endfor %}</ul></td>
                <td><ul>{% for p in source.parts|sort((a, b) => a.number <=> b.number) %}<li><a href="{{ path('app_source_part_edit', {'id': p.id}) }}">edit</a></li>{% endfor %}</ul></td>
            </tr>
        {% else %}
            <tr>
                <td colspan="7">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    
{% endblock %}
